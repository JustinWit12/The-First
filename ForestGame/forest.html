<!DOCTYPE html>
<html>
<head>
	<title>Forest Adventure</title>
	<style>
		#comp{
			float: right;
		}
	</style>
</head>

<body>
	<img src="" width="300px" height="267px">
	<img id = "comp"src="images/map.png" width = "300px">
	<p id= "output"> </p>
	<input id = "input" type ="text" placeholder ="Enter Your Action...">
	<button id ="key"> Enter</button>
	


	<script>
		var map = [];
		map[0] = "An Old Stone Keep";
		map[1] = "A Deep Well";
		map[2] = "A Sunny Glade";
		map[3] = "A Sleeping Dragon";
		map[4] = "A Narrow Pathway";
		map[5] = "An Ancient Gate";
		map[6] = "The Edge of a River";
		map[7] = "A Lonely Wooden Bench";
		map[8] = "An Isolated Cottage.";

		var actionsIknow = ["north", "east", "south", "west"];
		var itemsLocation = [1, 6, 8];

		var img = [];
		img[0] = "images/keep.png"
		img[1] = "images/well.png"
		img[2] = "images/glade.png"
		img[3] = "images/dragon.png"
		img[4] = "images/path.png"
		img[5] = "images/gate.png"
		img[6] = "images/river.png"
		img[7] = "images/bench.png"
		img[8] = "images/cottage.png"

		var blockedPathMessages = [];
		blockedPathMessages[0] = "It's way too dangerous to go that way!";
		blockedPathMessages[1] = "A strange force pulls you back!";
		blockedPathMessages[2] = "There are thorns in the way!";
		blockedPathMessages[3] = "You can't step over a dragon!";
		blockedPathMessages[4] = " ";
		blockedPathMessages[5] = "The gate is locked";
		blockedPathMessages[6] = "The water is too cold to cross";
		blockedPathMessages[7] = "The trees are too thick to pass";
		blockedPathMessages[8] = "That way is too scary";
		
		var items = ["flute", "stone", "sword"];

		var backpack = [];

		var itemsIknow = ["flute", "stone", "sword"];
		var item = "";
		
		var mapLocation = 4;
		var playerInput = "";
		var gameMessage = "";
		var action = "";




		var output= document.querySelector("#output");
			output.innerHTML = map[mapLocation];
		var input = document.querySelector("#input"); 
		var button = document.querySelector("button");
			button.style.cursor = "pointer";
		button.addEventListener("click", clickHandler, false);
		var image = document.querySelector("img");


		document.getElementById("input")
    		.addEventListener("keyup", function(event) {
   				event.preventDefault();
   				if (event.keyCode == 13) {
        			document.getElementById("key").click();
   				}
			});




		/*Function*/
		render();
		function clickHandler(){
			playGame();
		}

		function playGame(){
			playerInput = input.value;
			playerInput = playerInput.toLowerCase();

			gameMessage = "";
			action = "";
		

		for(i = 0; i<actionsIknow.length; i++){
			if(playerInput.indexOf(actionsIknow[i] !== -1)){
				action = playerInput;
				console.log("Players action: " + action);
				break;
			}
		}

		switch(action){
			case "north":
				if (mapLocation >=3){
					mapLocation -=3;
				}
				else{
					gameMessage = blockedPathMessages[mapLocation];
				}
			break;

			case "east":
				if(mapLocation % 3 !=2){
					mapLocation +=1;
				}
				else{
					gameMessage = blockedPathMessages[mapLocation]
				}
				break;

			case "south":
				if (mapLocation < 6){
				mapLocation +=3;
				}
				else{
					gameMessage = blockedPathMessages[mapLocation];
				}
			break;

			case "west":
				if(mapLocation % 3 !=0){
					mapLocation -=1;
				}
				else{
					gameMessage = blockedPathMessages[mapLocation]
				}
			break;

			case "take":
				takeItem()
				break;

			case "drop":
				dropItem()
				break;

			case "use":
				useItem()
				break;

			default:
			gameMessage = "I do not know that!"
		}
		render();
	}

	function render(){
		output.innerHTML = map[mapLocation];
		image.src = img[mapLocation]
		for(var i = 0; i<items.length; i++){
			if(mapLocation === itemsLocation[i]){
				output.innerHTML += "<br> You see a <strong>" + items[i] + "</strong> here."
			}
		}

		output.innerHTML += "<br> <em>" + gameMessage +"</em>"
		input.value = "";

		if(backpack.length !== 0){
			output.innerHTML += "<br>You are carrying: " + backpack.join(", ");
		}
	}

	function takeItem(){
		var itemIndexNumber = items.indexOf(item);
		if(itemIndexNumber !== -1 && itemsLocation[itemIndexNumber]){
			gameMessage = "You take the: " + item + ".";
			backpack.push(item);
			items.splice(itemIndexNumber, 1);
			itemsLocation.splice(itemIndexNumber, 1);
		}

		else{
			gameMessage = "You can't do that!";
		}
	}

	function dropItem(){
		if(backpack.length !== 0){
			var backpackIndexNumber = backpack.indexOf(item);
			if(backpackIndexNumber !== -1){
				gameMessage = "You dropped the " + item + ".";
				items.push(backpack[backpackIndexNumber]);
				itemsLocation.push(mapLocation);
				backpack.splice(backpackIndexNumber);
			}
			else{
				gameMessage = "You can't do that!";
			}
		}
		else{
			gameMessage = "You're not carrying anything!";
		}
	}

	function useItem(){

	}


	</script>

</body>
</html>